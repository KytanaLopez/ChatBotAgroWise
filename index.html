<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Chatbot Post-Cosecha de Mango</title>

<!-- Fuentes y estilos -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

<style>
    body {
        margin: 0;
        background: linear-gradient(135deg, #ffd35f, #ffa726);
        font-family: "Poppins", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .chat-container {
        width: 95%;
        max-width: 470px;
        background: #ffffffdd;
        border-radius: 25px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        backdrop-filter: blur(8px);
        animation: fadeIn 0.8s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* HEADER */
    .header {
        background: linear-gradient(45deg, #fb8c00, #ffb04c);
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 24px;
        font-weight: bold;
        letter-spacing: 1px;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
    }

    .header img {
        width: 32px;
        height: 32px;
        animation: float 2s infinite ease-in-out;
    }

    @keyframes float {
        0% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
        100% { transform: translateY(0); }
    }

    /* CHAT BOX */
    .chat-box {
        height: 430px;
        overflow-y: auto;
        padding: 15px;
        background: #fffdf7;
        scroll-behavior: smooth;
    }

    .msg {
        max-width: 80%;
        padding: 12px 14px;
        border-radius: 14px;
        margin-bottom: 12px;
        line-height: 1.4;
        animation: slideUp 0.25s ease;
    }

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .user {
        background: #cfe3ff;
        align-self: flex-end;
        border-bottom-right-radius: 0;
    }

    .bot {
        background: #ffe0b2;
        align-self: flex-start;
        border-bottom-left-radius: 0;
    }

    /* CHIPS */
    .buttons-area {
        padding: 10px;
        background: #fff3e0;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: center;
    }

    .chip {
        padding: 8px 14px;
        background: #ffb74d;
        border-radius: 20px;
        color: white;
        font-size: 13px;
        cursor: pointer;
        box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        transition: 0.2s;
    }

    .chip:hover {
        background: #ffa726;
        transform: scale(1.08);
    }

    /* INPUT */
    .input-area {
        display: flex;
        padding: 10px;
        background: #fff3e0;
        border-top: 1px solid #ffd699;
    }

    input {
        flex: 1;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid #ccc;
        font-size: 14px;
    }

    button {
        margin-left: 8px;
        padding: 10px 18px;
        background: #fb8c00;
        color: white;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: 0.2s;
    }
    button:hover {
        background: #e07a00;
        transform: scale(1.05);
    }

</style>
</head>

<body>
<div class="chat-container">
    <div class="header">
        <img src="mango.png" />
        
        Chatbot Post-Cosecha de Mango
    </div>

    <div class="chat-box" id="chat"></div>

    <!-- botones -->
    <div class="buttons-area">
        <div class="chip" onclick="quickAsk('hola')">Hola</div>
        <div class="chip" onclick="quickAsk('Â¿quÃ© puedo preguntar?')">Â¿QuÃ© puedo preguntar?</div>
        <div class="chip" onclick="quickAsk('desinfecciÃ³n del mango')">DesinfecciÃ³n</div>
        <div class="chip" onclick="quickAsk('maduraciÃ³n del mango')">MaduraciÃ³n</div>
        <div class="chip" onclick="quickAsk('almacenamiento')">Almacenamiento</div>
        <div class="chip" onclick="quickAsk('daÃ±o por frÃ­o')">DaÃ±o por frÃ­o</div>
        <div class="chip" onclick="quickAsk('vida Ãºtil del mango')">Vida Ãºtil</div>
        <div class="chip" onclick="quickAsk('mango kent')">Mango Kent</div>
        <div class="chip" onclick="quickAsk('mango tommy')">Tommy Atkins</div>
        <div class="chip" onclick="quickAsk('mango keitt')">Keitt</div>
    </div>

    <div class="input-area">
        <input type="text" id="userInput" placeholder="Escribe tu pregunta..." />
        <button onclick="sendMessage()">Enviar</button>
    </div>
</div>

<script>
// =============================
// BASE DE CONOCIMIENTO MEJORADA
// =============================

const baseConocimiento = {
    saludos: [
        { t: "hola", r: "Â¡Hola! ðŸŒž Â¿En quÃ© puedo ayudarte hoy?" },
        { t: "buenas", r: "Â¡Hola! Â¿Listo para aprender sobre post-cosecha? ðŸ¥­" }
    ],

    temas: [
        { t: "desinfecciÃ³n", r: "La desinfecciÃ³n se hace con agua clorada (100â€“150 ppm) o fungicidas. Esto reduce enfermedades como la antracnosis." },
        { t: "maduraciÃ³n", r: "La maduraciÃ³n Ã³ptima es a 20â€“22Â°C con 90â€“95% de humedad. Puede aplicarse etileno entre 100 y 150 ppm." },
        { t: "almacenamiento", r: "La mayorÃ­a de mangos se almacenan entre 10â€“13Â°C segÃºn variedad." },
        { t: "daÃ±o por frÃ­o", r: "El mango sufre daÃ±o por frÃ­o debajo de 10Â°C. Los sÃ­ntomas incluyen manchas negras y pÃ©rdida de sabor." },
        { t: "vida Ãºtil", r: "Un mango bien manejado puede durar entre 2 y 3 semanas dependiendo de la variedad y la temperatura." },
    ],

    variedades: [
        { t: "kent", r: "ðŸ¥­ Mango Kent: dulce, sin fibras, excelente para exportaciÃ³n. Se almacena a 12â€“13Â°C." },
        { t: "tommy", r: "ðŸŠ Tommy Atkins: resistente, fibroso y excelente para transporte de larga distancia." },
        { t: "keitt", r: "ðŸ Mango Keitt: verde incluso maduro, poca fibra y larga vida de anaquel." }
    ]
};

// =============================
// MOTOR DE RESPUESTAS "INTELIGENTE"
// =============================

function obtenerRespuesta(texto) {
    texto = texto.toLowerCase();

    // 1. saludos
    for (let s of baseConocimiento.saludos) {
        if (texto.includes(s.t)) return s.r;
    }

    // 2. temas tÃ©cnicos
    for (let t of baseConocimiento.temas) {
        if (texto.includes(t.t)) return t.r;
    }

    // 3. variedades
    for (let v of baseConocimiento.variedades) {
        if (texto.includes(v.t)) return v.r;
    }

    // 4. modo "semilla de IA" (respuesta generada)
    if (texto.length > 5) {
        return "Interesante pregunta ðŸ¤”. Aunque no tengo esa informaciÃ³n exacta, puedo decirte que en post-cosecha del mango es esencial controlar temperatura, humedad, manejo y desinfecciÃ³n para mantener la calidad. Â¿Quieres que busquemos otro aspecto mÃ¡s especÃ­fico?";
    }

    return "No tengo esa informaciÃ³n aÃºn ðŸƒ, pero pregÃºntame sobre tÃ©cnicas post-cosecha o variedades.";
}

// =============================
// INTERFAZ
// =============================

function agregarMensaje(texto, tipo) {
    const chat = document.getElementById("chat");
    const msg = document.createElement("div");
    msg.className = `msg ${tipo}`;
    msg.textContent = texto;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
}

function sendMessage() {
    const input = document.getElementById("userInput");
    const texto = input.value.trim();
    if (!texto) return;

    agregarMensaje(texto, "user");
    const respuesta = obtenerRespuesta(texto);

    setTimeout(() => agregarMensaje(respuesta, "bot"), 400);
    input.value = "";
}

function quickAsk(texto) {
    agregarMensaje(texto, "user");
    const respuesta = obtenerRespuesta(texto);
    setTimeout(() => agregarMensaje(respuesta, "bot"), 400);
}

// Mensaje inicial
setTimeout(() => {
    agregarMensaje("Â¡Bienvenido! ðŸ‘‹ Soy tu asistente inteligente de post-cosecha especializado en mango. PregÃºntame lo que quieras.", "bot");
}, 700);

</script>
</body>
</html>